import{_ as ne}from"./C-3c_78a.js";import{_ as ae}from"./fIBzQS2t.js";import{v as re}from"./BF0MqNf0.js";import{c as ie,al as ce,r as de,w as O,G as ue,H as pe,$ as f,a4 as e,u as o,W as I,X as i,ad as P,a5 as g,D as p,a6 as C,F as D,ac as E,V as d,aa as U,ab as me,aB as Z,a9 as _e,a7 as fe,a8 as he}from"./B7WI5WXn.js";import{_ as be,O as xe,$ as ge,i as ye,u as ve}from"./-cNTWuXj.js";import{u as we}from"./COWUXI4Y.js";import{_ as ke}from"./DjMDzfwj.js";import{_ as ee,a as Ce}from"./CaPaUSTr.js";import{_ as $e,a as Re}from"./CvJeMNre.js";import{_ as je}from"./DKIhSMag.js";import{_ as Le}from"./D3OYlhAI.js";import{u as Me}from"./j5w3CbAX.js";import{D as Se}from"./BbWvicCe.js";import{M as Be}from"./CeQqlF1m.js";import{_ as De,M as Ee}from"./DU_Uaq5a.js";import"./Bk7pg9Pj.js";import"./qFDjv55j.js";import"./bU3WTsfT.js";import"./5q0TPYXN.js";import"./2xzKWAGc.js";import"./Da_X7bZi.js";import"./OcPgzTSJ.js";import"./vLroTGJ7.js";import"./_AkbuRIs.js";import"./CLFzEa0p.js";import"./COil412o.js";import"./CJihE7tr.js";import"./C-M8fy8D.js";import"./DuULCnVE.js";import"./Cuv3zMdU.js";import"./CXxVz6xJ.js";import"./BinRbuwh.js";const u=q=>(fe("data-v-39fc5932"),q=q(),he(),q),qe={class:"bg-white md:rounded-[6px] md:p-[30px] p-4 overflow-hidden overflow-y-auto md:max-h-[calc(100vh_-_160px)] md:min-h-[calc(100vh_-_160px)] max-h-[100vh] min-h-[100vh] pb-20"},Ne={class:"pb-[100px]"},Te={class:"flex items-center justify-between _c92 border-b border-[#EDEDED] pb-4 mb-5"},Ye=u(()=>e("img",{src:ke,alt:""},null,-1)),Ve=u(()=>e("p",{class:"text-lg font-semibold sm:block hidden"},"Orqaga",-1)),Ie=[Ye,Ve],Ue={class:"flex items-end justify-between gap-6 flex-wrap"},ze={class:"md:space-y-1 space-y-[10px]"},Fe={class:"font-semibold md:text-[28px] text-xl"},He=u(()=>e("p",{class:"md:text-[16px] text-sm _c66"}," Bugun nimani o'rganmoqchisiz? ",-1)),Ae={class:"flex flex-wrap md:gap-[60px] gap-10 md:text-[16px] text-sm"},Oe=u(()=>e("h1",{class:"_cab"},"Sinf",-1)),Pe={class:"flex items-center justify-between cursor-pointer font-medium w-[100px]"},Xe=u(()=>e("p",{class:"full_flex b_cff3 w-5 h-5 rounded-full"},[e("img",{src:ee,alt:""})],-1)),Ge=u(()=>e("h1",{class:"_cab"},"Darslik",-1)),Ke={class:"flex items-center justify-between cursor-pointer font-medium w-[100px]"},Qe=u(()=>e("p",{class:"full_flex b_cff3 w-5 h-5 rounded-full"},[e("img",{src:ee,alt:""})],-1)),We=u(()=>e("p",{class:"md:hidden block h-4 b_cf6 -mx-4 mt-6"},null,-1)),Je={class:"md:mt-[30px] mt-5"},Ze={class:"font-medium text-xl"},et={class:"text-sm _c66"},tt={class:"overflow-x-auto sm:mx-0 -mx-4"},st={class:"draggable-table mt-6 w-full text-start whitespace-nowrap"},ot=u(()=>e("thead",null,[e("tr",null,[e("th",{class:"pr-6 text-start font-[400] pb-[6px] _cab sm:table-cell hidden"}," № "),e("th",{class:"sm:px-6 px-4 text-start font-[400] pb-[6px] _cab"}," Mavzu "),e("th",{class:"px-6 font-[400] pb-[6px] _cab sm:table-cell hidden"}," Dars davomiyligi "),e("th",{class:"px-6 font-[400] pb-[6px] _cab sm:table-cell hidden"}," Topshirganlar "),e("th",{class:"px-6 font-[400] pb-[6px] _cab sm:table-cell hidden"}," Yechim "),e("th",{class:"px-6 font-[400] pb-[6px] _cab min-w-[70px]"})])],-1)),lt=["onClick"],nt={class:"py-6 pr-6 sm:block hidden"},at={class:"sm:py-6 py-3 sm:px-6 px-4"},rt={key:0,class:"sm:hidden flex gap-1 font-medium _c99 mt-1"},it={class:"full_flex py-6 px-6"},ct={key:0,class:"sm:flex gap-1 hidden"},dt={class:"py-6 px-6 text-center sm:table-cell hidden"},ut=u(()=>e("td",{class:"py-6 px-6 sm:table-cell hidden"},[e("img",{class:"mx-auto",src:Ce,alt:""})],-1)),pt={class:"sm:py-6 py-3 sm:px-6 px-4 min-w-[70px]"},mt={key:0,class:"mx-auto w-6 h-6",src:$e,alt:""},_t={key:1,class:"mx-auto w-6 h-6",src:Re,alt:""},ft={key:2,class:"mx-auto w-6 h-6",src:je,alt:""},ht={class:"py-6 px-5"},bt=u(()=>e("img",{class:"cursor-pointer min-w-[20px] threedot_dropdown",src:Le,alt:""},null,-1)),xt=u(()=>e("div",{class:"flex justify-between items-center w-full"},[e("h1",{class:"font-semibold text-2xl"},"Mavzu qo‘shish")],-1)),gt={class:"space-y-2"},yt=u(()=>e("label",{for:"name"},"Mavzu nomi",-1)),vt={class:"grid grid-cols-2 gap-4 w-full"},wt={for:"free",class:"full_flex !justify-between gap-5 border_ced r_8 py-3 px-6"},kt=u(()=>e("div",null,[e("p",null,"Darslik")],-1)),Ct={for:"paid",class:"full_flex !justify-between gap-5 border_ced r_8 py-3 px-6"},$t=u(()=>e("div",null,[e("p",null,"Test")],-1)),Rt=u(()=>e("div",{class:"space-y-6"},[e("h1",{class:"font-semibold text-lg"},"Kursni o'chirish"),e("p",null,"Haqiqatdan ham bu kursni o'chirmoqchimisiz?")],-1)),jt={class:"flex items-center gap-5 mt-5"},Lt={__name:"index",async setup(q){let X,G;const{formatSecondsToHours:K}=Me(),l=xe(),Q=ge(),W=ye(),h=ve(),J=ie(["1-sinf","2-sinf","3-sinf","4-sinf","5-sinf","6-sinf","7-sinf","8-sinf","9-sinf","10-sinf","11-sinf"]);[X,G]=ce(()=>we(()=>l.getLessons(),"$yEMabC2cew")),await X,G();const w=de({subject:h.currentRoute.value.params.subject,class:h.currentRoute.value.query.class});function te(r){l.store.lesson_id=r.id;for(let n in l.create)l.create[n]=r[n];l.modal.edit=!0,l.modal.create=!0}function se(r){l.store.lesson_id=r,l.modal.delete=!0}console.log(h.currentRoute.value.params.subject),isNaN(h.currentRoute.value.query.class)&&console.log(h.currentRoute.value.params.subject);function oe(r,n,m,c){r.target.className.includes("threedot_dropdown")||h.push(`${h.currentRoute.value.path}/${n.id}`)}return O(()=>w.class,()=>{console.log(h.currentRoute.value);let r=`/lessons/${w.subject}?class=${w.class+1}`;h.push(r)}),O(()=>w.subject,()=>{let r=`/lessons/${w.subject}?class=${h.currentRoute.value.query.class}`;h.push(r)}),O(()=>h.currentRoute.value,()=>{l.getLessons()}),ue(()=>{Q.getSubjects()}),pe(()=>{(function(){const r=document.getElementById("table"),n=r==null?void 0:r.querySelector("tbody");let m=null,c=null,j=0,L=0,M=0,$=!1;function z(){N()}function N(){document.addEventListener("mousedown",s=>{if(s.button!=0)return!0;let a=Y(s.target);a&&(m=a,S(a),m.classList.add("is-dragging"),j=B(s).y,$=!0)}),document.addEventListener("mousemove",s=>{if(!$)return;M=B(s).y-j,x(L,M)}),document.addEventListener("mouseup",s=>{$&&(m.classList.remove("is-dragging"),r.removeChild(c),c=null,$=!1)})}function t(s,a){let _=Array.from(n.children).indexOf(m),b=_>a?m:s,k=_>a?s:m;n.insertBefore(b,k)}function x(s,a){c.style.transform="translate3d("+s+"px, "+a+"px, 0)";let _=c.getBoundingClientRect(),b=_.y,k=b+_.height,R=T();for(var V=0;V<R.length;V++){let F=R[V],H=F.getBoundingClientRect(),A=H.y,le=A+H.height;m!==F&&v(b,k,A,le)&&Math.abs(b-A)<H.height/2&&t(F,V)}}function S(s){c=s.cloneNode(!0),c.classList.add("draggable-table__drag"),c.style.height=y(s,"height"),c.style.background=y(s,"backgroundColor");for(var a=0;a<s.children.length;a++){let k=s.children[a],R=c.children[a];R.style.width=y(k,"width"),R.style.height=y(k,"height"),R.style.padding=y(k,"padding"),R.style.margin=y(k,"margin")}r.appendChild(c);let _=s.getBoundingClientRect(),b=c.getBoundingClientRect();c.style.bottom=b.y-_.y-_.height+"px",c.style.left="-1px",document.dispatchEvent(new MouseEvent("mousemove",{view:window,cancelable:!0,bubbles:!0}))}function T(){return r.querySelectorAll("tbody tr")}function Y(s){let a=s.tagName.toLowerCase();if(a=="tr")return s;if(a=="td")return s.closest("tr")}function B(s){return{x:s.clientX,y:s.clientY}}function y(s,a){let _=getComputedStyle(s),b=_[a];return b||null}function v(s,a,_,b){return Math.max(s,a)>=Math.min(_,b)&&Math.min(s,a)<=Math.max(_,b)}z()})()}),(r,n)=>{var N;const m=ne,c=De,j=Ee,L=Se,M=ae,$=Be,z=re;return d(),f("main",qe,[e("div",Ne,[e("nav",Te,[e("div",{onClick:n[0]||(n[0]=t=>r.$router.back()),class:"flex items-center gap-4 cursor-pointer max-w-fit"},Ie),e("div",null,[o(W).user.data.current_role=="teacher"?(d(),I(m,{key:0,onClick:n[1]||(n[1]=t=>o(l).modal.create=!0),class:"bg_orange font-semibold white !px-6"},{default:i(()=>[C("Qo'shish")]),_:1})):P("",!0)])]),e("section",Ue,[e("div",ze,[e("h1",Fe,g(r.$router.currentRoute.value.params.subject_id),1),He]),e("ul",Ae,[e("li",null,[Oe,p(L,{trigger:["click"]},{overlay:i(()=>[p(j,null,{default:i(()=>[(d(!0),f(D,null,E(o(J),(t,x)=>(d(),I(c,{onClick:S=>o(w).class=x,key:t},{default:i(()=>[e("p",null,g(t),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:i(()=>[e("div",Pe,[e("p",null,g(o(J)[o(h).currentRoute.value.query.class-1]),1),Xe])]),_:1})]),e("li",null,[Ge,p(L,{trigger:["click"]},{overlay:i(()=>[p(j,null,{default:i(()=>[(d(!0),f(D,null,E(o(Q).store.subjects,t=>(d(),I(c,{onClick:x=>o(w).subject=t.title,key:t.id},{default:i(()=>[e("p",null,g(t.title),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:i(()=>[e("div",Ke,[e("p",null,g(o(w).subject),1),Qe])]),_:1})])])]),We,e("section",Je,[e("h1",Ze,[C(" Darslar "),e("span",et,"("+g((N=o(l).store.lessons)==null?void 0:N.length)+"-darslar)",1)]),e("div",tt,[e("table",st,[ot,e("tbody",null,[(d(!0),f(D,null,E(o(l).store.lessons,(t,x)=>{var S,T,Y,B,y;return d(),f("tr",{onClick:v=>{var s,a;return oe(v,t,x,((s=o(l).store.user_step)==null?void 0:s.lesson_id)+1==((a=o(l).store.lessons[x])==null?void 0:a.id)||x==0||t.user_step)},class:"border-b border-[#EDEDED] cursor-pointer"},[e("td",nt,g(x+1),1),e("td",at,[e("p",null,g(t.title),1),t.video_lesson?(d(),f("p",rt,[(d(!0),f(D,null,E(o(K)((T=(S=t.video_lesson[0])==null?void 0:S.video)==null?void 0:T.duration),v=>(d(),f("span",null,g(v),1))),256))])):P("",!0)]),e("td",it,[t.video_lesson?(d(),f("p",ct,[(d(!0),f(D,null,E(o(K)((B=(Y=t.video_lesson[0])==null?void 0:Y.video)==null?void 0:B.duration),v=>(d(),f("span",null,g(v),1))),256))])):P("",!0)]),e("td",dt,g(t.totalUsers),1),ut,e("td",pt,[t.user_step?(d(),f("img",mt)):(y=o(l).store.lessons[x-1])!=null&&y.user_step||x==0?(d(),f("img",_t)):(d(),f("img",ft))]),e("td",ht,[p(L,{trigger:["click"]},{overlay:i(()=>[p(j,null,{default:i(()=>[p(c,{onClick:v=>te(t)},{default:i(()=>[C("Edit")]),_:2},1032,["onClick"]),p(c,{onClick:v=>se(t.id,x)},{default:i(()=>[C("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[bt]),_:2},1024)])],8,lt)}),256))])])])])]),p($,{class:"max-w-[440px]",open:o(l).modal.create,"onUpdate:open":n[8]||(n[8]=t=>o(l).modal.create=t),centered:""},{default:i(()=>[xt,e("form",{onSubmit:n[7]||(n[7]=_e((...t)=>o(l).createLesson&&o(l).createLesson(...t),["prevent"])),class:"space-y-5 _c45 mt-[30px]"},[e("div",gt,[yt,U(e("input",{"onUpdate:modelValue":n[2]||(n[2]=t=>o(l).create.title=t),class:"rounded-[12px]",id:"name",type:"text"},null,512),[[me,o(l).create.title]])]),e("div",vt,[e("label",wt,[kt,U(e("input",{"onUpdate:modelValue":n[3]||(n[3]=t=>o(l).create.type=t),type:"radio",value:!1,name:"type",id:"free",class:"h-5 w-5"},null,512),[[Z,o(l).create.type]])]),e("label",Ct,[$t,U(e("input",{"onUpdate:modelValue":n[4]||(n[4]=t=>o(l).create.type=t),type:"radio",value:!0,name:"type",id:"paid",class:"h-5 w-5"},null,512),[[Z,o(l).create.type]])])]),p(m,{onClick:n[5]||(n[5]=t=>o(l).store.createModal=!1),type:"submit",class:"!h-12 w-full bg_orange !mt-[54px] font-semibold white"},{default:i(()=>[C(" Yaratish "),p(M)]),_:1}),p(m,{type:"button",class:"!h-12 w-full font-semibold _c07",onClick:n[6]||(n[6]=t=>o(l).modal.create=!1)},{default:i(()=>[C(" Bekor qilish "),p(M)]),_:1})],32)]),_:1},8,["open"]),p($,{width:"200",open:o(l).modal.delete,"onUpdate:open":n[10]||(n[10]=t=>o(l).modal.delete=t),centered:""},{default:i(()=>[Rt,e("div",jt,[p(m,{onClick:n[9]||(n[9]=t=>o(l).modal.delete=!1),class:"border border-[#BBBBBB] !h-10"},{default:i(()=>[C("Yo'q")]),_:1}),U((d(),I(m,{onClick:o(l).deleteLesson,class:"bg_orange white !h-10"},{default:i(()=>[C("Ha")]),_:1},8,["onClick"])),[[z,o(W).isLoadingType("deleteSubject")]])])]),_:1},8,["open"])])}}},rs=be(Lt,[["__scopeId","data-v-39fc5932"]]);export{rs as default};
